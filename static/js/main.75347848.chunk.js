(this.webpackJsonpspotit=this.webpackJsonpspotit||[]).push([[0],{108:function(e,t,n){},12:function(e,t,n){e.exports={AlbumCard:"AlbumCard_AlbumCard___MstQ",albumProps:"AlbumCard_albumProps__3d39H",imgContainer:"AlbumCard_imgContainer__1duqt",main:"AlbumCard_main__34eND",name:"AlbumCard_name__2lo9n",artists:"AlbumCard_artists__3D034",preview:"AlbumCard_preview__3O7T0"}},18:function(e,t,n){e.exports={ArtistCard:"ArtistCard_ArtistCard__ZCdVO",imgContainer:"ArtistCard_imgContainer__Kd-f2",main:"ArtistCard_main__1RTcx",name:"ArtistCard_name__3X3IS",rating:"ArtistCard_rating__2E4FB"}},244:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(37),s=n.n(a),o=n(23),i=n(99),l=n(3),u="SET_ACCESS_TOKEN",j="REMOVE_ACCESS_TOKEN",b="SET_ARTISTS",d="REMOVE_ARTISTS",f="SET_LAST_SEARCH",m="SET_CURRENT_ARTIST",h="REMOVE_CURRENT_ARTIST",g="SET_ALBUMS",O="REMOVE_ALBUMS",p="SET_NEXT_ARTISTS_URL",x="SET_NEXT_ALBUMS_URL",_=n(63),v=function(e,t){return Object(_.a)(Object(_.a)({},e),t)},S={accessToken:!!localStorage.getItem("accessToken"),artists:null,lastSearch:"",currentArtist:null,albums:null,nextArtistsUrl:null,nextAlbumsUrl:null},A=function(e,t){return localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("expiresAt",t.expiresAt),v(e,{accessToken:!0})},T=function(e,t){return localStorage.removeItem("accessToken"),localStorage.removeItem("expiresAt"),v(e,{accessToken:!1,timer:null})},C=function(e,t){return v(e,{artists:t.artists})},N=function(e,t){return v(e,{artists:null})},k=function(e,t){return v(e,{lastSearch:t.lastSearch})},y=function(e,t){return v(e,{currentArtist:t.currentArtist})},E=function(e,t){return v(e,{currentArtist:null})},w=function(e,t){return v(e,{albums:t.albums})},L=function(e,t){return v(e,{albums:null})},R=function(e,t){return v(e,{nextArtistsUrl:t.nextArtistsUrl})},I=function(e,t){return v(e,{nextAlbumsUrl:t.nextAlbumsUrl})},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return A(e,t);case j:return T(e);case b:return C(e,t);case d:return N(e);case f:return k(e,t);case m:return y(e,t);case h:return E(e);case g:return w(e,t);case O:return L(e);case p:return R(e,t);case x:return I(e,t);default:return e}},P=(n(108),n(9)),B=n(4),M=n(26),H=n.n(M),F="https://accounts.spotify.com/authorize?client_id=6499b09693a64a09ae4d961182500473&redirect_uri=".concat(" https://joehachem3.github.io/spotit","/login&response_type=token&state=123"),z=function(e){return H.a.get(e,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}})},D=function(){return{type:j}},V=function(e){return{type:m,currentArtist:e}},X=n.p+"static/media/spotifyLogo.bc1a3e4c.svg",q=n(96),K=n.n(q),Q=n(1),W=function(e){return Object(Q.jsxs)("a",{href:e.href,className:K.a.SpotifyLogin,children:[Object(Q.jsx)("span",{children:"Login with Spotify"}),Object(Q.jsx)("img",{src:X,alt:"Spotify logo"})]})},Y=n(57),J=n.n(Y),Z=function(e){var t=Object(l.c)((function(e){return e.accessToken})),n=Object(l.b)(),r=Object(c.useCallback)((function(e,t){return n(function(e,t){return{type:u,accessToken:e,expiresAt:t}}(e,t))}),[n]),a=Object(c.useCallback)((function(){return n(D())}),[n]);return Object(c.useEffect)((function(){if(t)e.history.replace("/artists");else{var n=new URLSearchParams(e.location.hash.replace("#","?")),c=n.get("access_token");if(c){var a=(new Date).getTime(),s=1e3*parseInt(n.get("expires_in"));r(c,a+s),e.history.replace("/artists")}}}),[e,t,r,a]),Object(Q.jsxs)("section",{className:J.a.LoginPage,children:[Object(Q.jsxs)("h1",{className:J.a.welcome,children:[Object(Q.jsx)("span",{children:"Welcome to Spotit,"})," Get started here"]}),Object(Q.jsx)(W,{href:F})]})},G=n(21),$=n(245),ee=n.p+"static/media/search.f8c9c140.svg",te=n(97),ne=n.n(te),ce=function(e){var t=Object(c.useRef)(),n=Object(l.c)((function(e){return e.lastSearch})),r=Object(c.useState)(e.lastSearch),a=Object(P.a)(r,2),s=a[0],o=a[1],i=function(n){if(n.preventDefault(),t.current){var c=t.current.value.trim();c&&e.search(c)}};return Object(Q.jsxs)("form",{onSubmit:i,className:ne.a.SearchBar,children:[Object(Q.jsx)("input",{ref:t,id:"searchInput",type:"text",value:s,placeholder:"Search for an artist...",onChange:function(c){o(c.target.value);var r=c.target.value.trim();setTimeout((function(){if(t.current){var c=t.current.value.trim();console.log(r),console.log(c),c!==n&&r===c&&e.search(r)}}),500)}}),Object(Q.jsx)("img",{src:ee,alt:"",onClick:i})]})},re=n(98),ae=n.n(re),se={transitionDuration:0},oe=function(e){return Object(Q.jsx)(ae.a,{options:se,children:e.children})},ie=n(18),le=n.n(ie),ue=function(e){for(var t=Math.floor(e.rating),n=[],c=1;c<=5;c++)if(c<t)n.push(Object(Q.jsx)("div",{style:{background:"var(--color-bright-green)"}},c));else if(c<e.rating){var r=100*(e.rating-t);n.push(Object(Q.jsx)("div",{style:{background:"linear-gradient(90deg, var(--color-bright-green) ".concat(r,"%, var(--color-gray) ").concat(100-r,"%)")}},c))}else n.push(Object(Q.jsx)("div",{style:{background:"var(--color-gray)"}},c));return Object(Q.jsxs)("div",{className:le.a.ArtistCard,onClick:e.redirect,children:[Object(Q.jsx)("div",{className:le.a.imgContainer,children:Object(Q.jsx)("img",{src:e.image,alt:e.name})}),Object(Q.jsxs)("div",{className:le.a.main,children:[Object(Q.jsx)("h5",{className:le.a.name,children:e.name}),Object(Q.jsxs)("p",{className:le.a.followers,children:[e.followers," followers"]}),Object(Q.jsx)("div",{className:le.a.rating,children:n})]})]})},je=n(58),be=n.n(je),de=function(e){return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)("img",{src:X,alt:"",className:[be.a.Spinner,be.a[e.className]].join(" ")})})},fe=n.p+"static/media/defaultArtist.b95d14e9.png",me=n(27),he=n.n(me),ge=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(!1),r=Object(P.a)(n,2),a=r[0],s=r[1],o=Object(c.useState)(null),i=Object(P.a)(o,2),u=(i[0],i[1],Object(c.useState)(!1)),j=Object(P.a)(u,2),m=j[0],g=j[1],x=Object(l.c)((function(e){return e.artists})),_=Object(l.c)((function(e){return e.lastSearch})),v=Object(l.c)((function(e){return e.currentArtist})),S=Object(l.c)((function(e){return e.albums})),A=Object(l.c)((function(e){return e.nextArtistsUrl})),T=Object(l.b)(),C=Object(c.useCallback)((function(e){return T(function(e){return{type:b,artists:e}}(e))}),[T]),N=function(){return T({type:d})},k=function(e){return T(function(e){return{type:f,lastSearch:e}}(e))},y=Object(c.useCallback)((function(){return T({type:h,currentArtist:null})}),[T]),E=Object(c.useCallback)((function(){return T({type:O,albums:null})}),[T]),w=Object(c.useCallback)((function(e){return T(function(e){return{type:p,nextArtistsUrl:e}}(e))}),[T]);Object(c.useEffect)((function(){S&&E(),v&&y();var e=function(){t.current&&(t.current.getBoundingClientRect().top<=window.innerHeight+100&&(m||(g(!0),A&&z(A).then((function(e){console.log(e),w(e.data.artists.next),C([].concat(Object(G.a)(x),Object(G.a)(e.data.artists.items))),g(!1)})).catch((function(e){return console.log(e)})))))};return console.log("create"),window.addEventListener("scroll",e),function(){console.log("remove"),window.removeEventListener("scroll",e)}}),[m,x,v,S,A,w,C,y,E]);var L=function(t){!function(e){T(V(e))}({id:t.id,name:t.name}),e.history.push("/albums/".concat(t.id))},R=null===x||void 0===x?void 0:x.map((function(e){var t;return Object(Q.jsx)(ue,{redirect:function(){return L(e)},image:(null===(t=e.images[1])||void 0===t?void 0:t.url)||fe,name:e.name,followers:e.followers.total,rating:e.popularity/20},Object($.a)())})),I=Object(Q.jsx)(oe,{children:R}),U=a?Object(Q.jsx)(de,{className:"fixed"}):I,B=m?A?Object(Q.jsx)(de,{}):Object(Q.jsx)("h3",{children:"You've Reached the End"}):null;return Object(Q.jsxs)("section",{className:he.a.ArtistsPage,children:[Object(Q.jsx)("div",{className:he.a.searchBox,children:Object(Q.jsx)(ce,{search:function(e){if(!e)return N(),void k(e);s(!0),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e?"q=".concat(e):"",a=t.length?"type=".concat(t.join(",")):"",s=n?"limit=".concat(n):"",o=c?"offset=".concat(c):"";return H.a.get("https://api.spotify.com/v1/search?".concat(r,"&").concat(a,"&").concat(s,"&").concat(o),{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}})}(e,["artist"],20).then((function(t){console.log(t),C(t.data.artists.items),k(e),s(!1),w(t.data.artists.next)})).catch((function(e){return console.log(e)}))},lastSearch:_})}),Object(Q.jsx)("p",{className:he.a.searchText,children:R?R.length?"Showing results for '".concat(_,"'"):"No Results Found for '".concat(_,"'"):"Type anything in the search box to get started!"}),U,Object(Q.jsx)("footer",{className:he.a.footer,ref:t,children:B})]})},Oe=n(12),pe=n.n(Oe),xe=function(e){return Object(Q.jsxs)("div",{className:pe.a.AlbumCard,children:[Object(Q.jsxs)("div",{className:pe.a.albumProps,children:[Object(Q.jsx)("div",{className:pe.a.imgContainer,children:Object(Q.jsx)("img",{src:e.image,alt:e.name})}),Object(Q.jsxs)("div",{className:pe.a.main,children:[Object(Q.jsx)("h5",{className:pe.a.name,children:e.name}),Object(Q.jsx)("p",{className:pe.a.artists,children:e.artists.join(" ")}),Object(Q.jsx)("p",{className:pe.a.date,children:e.date}),Object(Q.jsxs)("p",{className:pe.a.tracks,children:[e.tracks," tracks"]})]})]}),Object(Q.jsx)("a",{className:pe.a.preview,href:e.preview,children:Object(Q.jsx)("span",{children:"Preview on Spotify"})})]})},_e=n.p+"static/media/defaultAlbum.7d7102cb.png",ve=n(40),Se=n.n(ve),Ae=function(e){var t=Object(c.useRef)(),n=Object(c.useState)(!1),r=Object(P.a)(n,2),a=r[0],s=(r[1],Object(c.useState)(null)),o=Object(P.a)(s,2),i=(o[0],o[1],Object(c.useState)(!1)),u=Object(P.a)(i,2),j=u[0],b=u[1],d=Object(l.c)((function(e){return e.currentArtist})),f=Object(l.c)((function(e){return e.albums})),m=Object(l.c)((function(e){return e.nextAlbumsUrl})),h=Object(l.b)(),O=Object(c.useCallback)((function(e){return h(V(e))}),[h]),p=Object(c.useCallback)((function(e){return h(function(e){return{type:g,albums:e}}(e))}),[h]),_=Object(c.useCallback)((function(e){return h(function(e){return{type:x,nextAlbumsUrl:e}}(e))}),[h]);Object(c.useEffect)((function(){var n;d||(n=e.match.params.id,H.a.get("https://api.spotify.com/v1/artists/".concat(n),{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}})).then((function(e){console.log(e),O({id:e.data.id,name:e.data.name})})).catch((function(e){return console.log(e)})),f||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.length?"include_groups=".concat(t.join(",")):"",a=n?"limit=".concat(n):"",s=c?"offset=".concat(c):"";return H.a.get("https://api.spotify.com/v1/artists/".concat(e,"/albums?").concat(r,"&").concat(a,"&").concat(s),{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}})}(e.match.params.id,[],20).then((function(e){console.log(e),e.data.items.forEach((function(e){return e.artists=e.artists.map((function(e){return e.name}))})),p(e.data.items),_(e.data.next)})).catch((function(e){return console.log(e)}));var c=function(){t.current&&(t.current.getBoundingClientRect().top<=window.innerHeight+100&&(j||(b(!0),m&&z(m).then((function(e){console.log(e),e.data.items.forEach((function(e){return e.artists=e.artists.map((function(e){return e.name}))})),p([].concat(Object(G.a)(f),Object(G.a)(e.data.items))),_(e.data.next),b(!1)})).catch((function(e){return console.log(e)})))))};return console.log("create"),window.addEventListener("scroll",c),function(){console.log("remove"),window.removeEventListener("scroll",c)}}),[e,j,d,f,m,_,O,p]);var v,S=null===f||void 0===f?void 0:f.map((function(e){var t;return Object(Q.jsx)(xe,{image:(null===(t=e.images[1])||void 0===t?void 0:t.url)||_e,name:e.name,artists:e.artists,tracks:e.total_tracks,date:e.release_date,preview:e.external_urls.spotify},Object($.a)())}));S&&(v=S.length?Object(Q.jsx)(oe,{children:S}):Object(Q.jsx)("h1",{children:"No Albums yet"}));var A=a?Object(Q.jsx)(de,{}):v,T=j?m?Object(Q.jsx)(de,{}):Object(Q.jsx)("h3",{children:"You've Reached the End"}):null;return Object(Q.jsxs)("section",{className:Se.a.AlbumsPage,children:[Object(Q.jsxs)("div",{className:Se.a.intro,children:[Object(Q.jsx)("h1",{children:null===d||void 0===d?void 0:d.name}),Object(Q.jsx)("span",{children:"Albums"})]}),A,Object(Q.jsx)("footer",{className:Se.a.footer,ref:t,children:T})]})},Te=n(59),Ce=n.n(Te),Ne=function(e){var t=Object(l.b)();return Object(Q.jsx)("button",{className:[Ce.a.Logout,Ce.a[e.className]].join(" "),onClick:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("expiresAt"),t(D())},children:"Logout"})},ke=n(60),ye=n.n(ke),Ee=function(e){return console.log(e.accessToken),Object(Q.jsxs)("nav",{className:ye.a.Header,children:[Object(Q.jsxs)(o.b,{to:"/artists",className:ye.a.Logo,children:[Object(Q.jsx)("img",{src:X,alt:""}),Object(Q.jsx)("h1",{children:"Spotit"})]}),e.accessToken?Object(Q.jsx)(Ne,{className:"header"}):null]})},we=Object(B.h)((function(){var e=Object(c.useState)(null),t=Object(P.a)(e,2),n=t[0],r=t[1],a=Object(l.c)((function(e){return e.accessToken})),s=Object(l.b)(),o=Object(c.useCallback)((function(){return s(D())}),[s]),i=Object(B.g)().pathname;return Object(c.useEffect)((function(){if(a){var e=localStorage.getItem("expiresAt"),t=(new Date).getTime();setTimeout((function(){o()}),e-t)}else"/login"!==i&&r(Object(Q.jsx)(B.a,{to:"/login"}))}),[a,i,o]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Ee,{accessToken:a}),Object(Q.jsxs)(B.d,{children:[Object(Q.jsx)(B.b,{exact:!0,path:"/login",component:Z}),Object(Q.jsx)(B.b,{exact:!0,path:"/artists",component:ge}),Object(Q.jsx)(B.b,{exact:!0,path:"/albums/:id",component:Ae})]}),n]})})),Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,246)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},Re=Object(i.a)(U);s.a.render(Object(Q.jsx)(r.a.StrictMode,{children:Object(Q.jsx)(l.a,{store:Re,children:Object(Q.jsx)(o.a,{basename:"/",children:Object(Q.jsx)(we,{})})})}),document.getElementById("root")),Le()},27:function(e,t,n){e.exports={footer:"ArtistsPage_footer__1yNVf",searchBox:"ArtistsPage_searchBox__32FPd",searchText:"ArtistsPage_searchText__1WZaa"}},40:function(e,t,n){e.exports={footer:"AlbumsPage_footer__251fr",intro:"AlbumsPage_intro__36c6W"}},57:function(e,t,n){e.exports={LoginPage:"LoginPage_LoginPage__2jbru",welcome:"LoginPage_welcome__1pizM"}},58:function(e,t,n){e.exports={Spinner:"Spinner_Spinner__1Hsyz",loading:"Spinner_loading__kqbuU",fixed:"Spinner_fixed__2U3x0"}},59:function(e,t,n){e.exports={Logout:"Logout_Logout__M7RYp",header:"Logout_header__1zRfy"}},60:function(e,t,n){e.exports={Header:"Header_Header__MTfQT",Logo:"Header_Logo__1S6Qb"}},96:function(e,t,n){e.exports={SpotifyLogin:"SpotifyLogin_SpotifyLogin__NuURX"}},97:function(e,t,n){e.exports={SearchBar:"SearchBar_SearchBar__8Soa7"}}},[[244,1,2]]]);
//# sourceMappingURL=main.75347848.chunk.js.map