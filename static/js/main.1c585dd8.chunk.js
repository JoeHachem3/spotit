(this.webpackJsonpspotit=this.webpackJsonpspotit||[]).push([[0],{109:function(t,e,n){},12:function(t,e,n){t.exports={AlbumCard:"AlbumCard_AlbumCard___MstQ",albumGrid:"AlbumCard_albumGrid__1Mgxn",imgContainer:"AlbumCard_imgContainer__1duqt",preview:"AlbumCard_preview__3O7T0",main:"AlbumCard_main__34eND",name:"AlbumCard_name__2lo9n",artists:"AlbumCard_artists__3D034"}},18:function(t,e,n){t.exports={ArtistCard:"ArtistCard_ArtistCard__ZCdVO",imgContainer:"ArtistCard_imgContainer__Kd-f2",main:"ArtistCard_main__1RTcx",name:"ArtistCard_name__3X3IS",rating:"ArtistCard_rating__2E4FB"}},245:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),c=n(37),s=n.n(c),i=n(23),o=n(100),u=n(4),l="SET_ACCESS_TOKEN",j="REMOVE_ACCESS_TOKEN",b="SET_TIMEOUT_ID",d="SET_ARTISTS",f="REMOVE_ARTISTS",m="SET_LAST_SEARCH",h="SET_CURRENT_ARTIST",O="REMOVE_CURRENT_ARTIST",g="SET_ALBUMS",x="REMOVE_ALBUMS",p="SET_NEXT_ARTISTS_URL",_="SET_NEXT_ALBUMS_URL",v=n(63),S=function(t,e){return Object(v.a)(Object(v.a)({},t),e)},A=function(t){var e=""+t,n=(e.length-1)/3;if(n>=1){var r=Math.floor(n),a="KMGT"[r-1],c=3*(n-r);return e.slice(0,c+1)+"."+e.slice(c+2,c+3)+a}return t},T={accessToken:!!localStorage.getItem("accessToken"),timeOutId:null,artists:null,lastSearch:"",currentArtist:null,albums:null,nextArtistsUrl:null,nextAlbumsUrl:null},C=function(t,e){return localStorage.setItem("accessToken",btoa(e.accessToken)),localStorage.setItem("expiresAt",e.expiresAt),S(t,{accessToken:!0})},N=function(t,e){return localStorage.removeItem("accessToken"),localStorage.removeItem("expiresAt"),t.timeOutId&&clearTimeout(t.timeOutId),S(t,{accessToken:!1,timeOutId:null,artists:null,lastSearch:"",currentArtist:null,albums:null,nextArtistsUrl:null,nextAlbumsUrl:null})},y=function(t,e){return S(t,{timeOutId:e.timeOutId})},E=function(t,e){return S(t,{artists:e.artists})},k=function(t,e){return S(t,{artists:null})},w=function(t,e){return S(t,{lastSearch:e.lastSearch})},L=function(t,e){return S(t,{currentArtist:e.currentArtist})},I=function(t,e){return S(t,{currentArtist:null})},R=function(t,e){return S(t,{albums:e.albums})},U=function(t,e){return S(t,{albums:null})},B=function(t,e){return S(t,{nextArtistsUrl:e.nextArtistsUrl})},M=function(t,e){return S(t,{nextAlbumsUrl:e.nextAlbumsUrl})},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return C(t,e);case j:return N(t);case b:return y(t,e);case d:return E(t,e);case f:return k(t);case m:return w(t,e);case h:return L(t,e);case O:return I(t);case g:return R(t,e);case x:return U(t);case p:return B(t,e);case _:return M(t,e);default:return t}},H=(n(109),n(3)),F=n(26),z=n.n(F),D="https://accounts.spotify.com/authorize?client_id=6499b09693a64a09ae4d961182500473&redirect_uri=".concat("https://joehachem3.github.io/spotit","/%23/&response_type=token&state=123"),V=function(t){return z.a.get(t,{headers:{Authorization:"Bearer "+atob(localStorage.getItem("accessToken"))}})},G=n.p+"static/media/spotifyLogo.bc1a3e4c.svg",K=n(96),Q=n.n(K),X=n(1),q=function(t){return Object(X.jsxs)("a",{href:t.href,className:Q.a.SpotifyLogin,children:[Object(X.jsx)("span",{children:"Login with Spotify"}),Object(X.jsx)("img",{src:G,alt:"Spotify logo"})]})},W=n(57),Y=n.n(W),J=function(){return Object(X.jsxs)("section",{className:Y.a.LoginPage,children:[Object(X.jsxs)("h1",{className:Y.a.welcome,children:[Object(X.jsx)("span",{children:"Welcome to Spotit,"})," Get started here"]}),Object(X.jsx)(q,{href:D})]})},Z=n(21),$=n(11),tt=n(246),et=n.p+"static/media/search.f8c9c140.svg",nt=n(97),rt=n.n(nt),at=function(t){var e=Object(r.useRef)(),n=Object(u.c)((function(t){return t.lastSearch})),a=Object(r.useState)(t.lastSearch),c=Object($.a)(a,2),s=c[0],i=c[1],o=function(n){if(n.preventDefault(),e.current){var r=e.current.value.trim();r&&t.search(r)}};return Object(X.jsxs)("form",{onSubmit:o,className:rt.a.SearchBar,children:[Object(X.jsx)("input",{ref:e,id:"searchInput",type:"text",value:s,placeholder:"Search for an artist...",onChange:function(r){i(r.target.value);var a=r.target.value.trim();setTimeout((function(){if(e.current){var r=e.current.value.trim();r!==n&&a===r&&t.search(a)}}),500)}}),Object(X.jsx)("img",{src:et,alt:"",onClick:o})]})},ct=n(98),st=n.n(ct),it={transitionDuration:0},ot=function(t){return Object(X.jsx)(st.a,{options:it,children:t.children})},ut=n(18),lt=n.n(ut),jt=function(t){for(var e=Math.floor(t.rating),n=[],r=1;r<=5;r++)if(r<e)n.push(Object(X.jsx)("div",{style:{background:"var(--color-bright-green)"}},r));else if(r<t.rating){var a=100*(t.rating-e);n.push(Object(X.jsx)("div",{style:{background:"linear-gradient(90deg, var(--color-bright-green) ".concat(a,"%, var(--color-gray) ").concat(100-a,"%)")}},r))}else n.push(Object(X.jsx)("div",{style:{background:"var(--color-gray)"}},r));return Object(X.jsxs)("div",{className:lt.a.ArtistCard,onClick:t.redirect,children:[Object(X.jsx)("div",{className:lt.a.imgContainer,children:Object(X.jsx)("img",{src:t.image,alt:t.name})}),Object(X.jsxs)("div",{className:lt.a.main,children:[Object(X.jsx)("h5",{className:lt.a.name,children:t.name}),Object(X.jsxs)("p",{className:lt.a.followers,children:[t.followers," followers"]}),Object(X.jsx)("div",{className:lt.a.rating,children:n})]})]})},bt=n(58),dt=n.n(bt),ft=function(t){return Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("img",{src:G,alt:"",className:[dt.a.Spinner,dt.a[t.className]].join(" ")})})},mt=n(99),ht=n.n(mt),Ot=function(t){var e=t.children;return t.error&&(e=Object(X.jsxs)("div",{className:ht.a.ErrorHandler,children:[Object(X.jsx)("h1",{children:t.error.message}),Object(X.jsx)("p",{children:"Oops... Something went wrong, try again later!"})]})),e},gt=function(){return{type:j}},xt=function(t){return{type:h,currentArtist:t}},pt=n.p+"static/media/defaultArtist.b95d14e9.png",_t=n(27),vt=n.n(_t),St=function(t){var e=Object(r.useRef)(),n=Object(r.useState)(!1),a=Object($.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(null),o=Object($.a)(i,2),l=o[0],j=o[1],b=Object(r.useState)(!1),h=Object($.a)(b,2),g=h[0],_=h[1],v=Object(u.c)((function(t){return t.artists})),S=Object(u.c)((function(t){return t.lastSearch})),T=Object(u.c)((function(t){return t.currentArtist})),C=Object(u.c)((function(t){return t.albums})),N=Object(u.c)((function(t){return t.nextArtistsUrl})),y=Object(u.b)(),E=Object(r.useCallback)((function(t){return y(function(t){return{type:d,artists:t}}(t))}),[y]),k=function(){return y({type:f})},w=function(t){return y(function(t){return{type:m,lastSearch:t}}(t))},L=Object(r.useCallback)((function(){return y({type:O,currentArtist:null})}),[y]),I=Object(r.useCallback)((function(){return y({type:x,albums:null})}),[y]),R=Object(r.useCallback)((function(t){return y(function(t){return{type:p,nextArtistsUrl:t}}(t))}),[y]);Object(r.useEffect)((function(){if(!l){C&&I(),T&&L();var t=function(){e.current&&(e.current.getBoundingClientRect().top<=window.innerHeight+100&&(g||(_(!0),N&&V(N).then((function(t){R(t.data.artists.next),E([].concat(Object(Z.a)(v),Object(Z.a)(t.data.artists.items))),_(!1)})).catch((function(t){s(!1),j(t)})))))};return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}}),[g,v,T,C,N,l,R,E,L,I]);var U=function(e){!function(t){y(xt(t))}({id:e.id,name:e.name}),t.history.push("/artists/".concat(e.id,"/albums"))},B=null===v||void 0===v?void 0:v.map((function(t){var e;return Object(X.jsx)(jt,{redirect:function(){return U(t)},image:(null===(e=t.images[1])||void 0===e?void 0:e.url)||pt,name:t.name,followers:A(t.followers.total),rating:t.popularity/20},Object(tt.a)())})),M=Object(X.jsx)(ot,{children:B}),P=c?Object(X.jsx)(ft,{className:"fixed"}):M,H=g?N?Object(X.jsx)(ft,{}):Object(X.jsx)("h3",{children:"You've Reached the End"}):null;return Object(X.jsxs)("section",{className:vt.a.ArtistsPage,children:[Object(X.jsx)("div",{className:vt.a.searchBox,children:Object(X.jsx)(at,{search:function(t){if(l&&j(null),!t)return k(),void w(t);s(!0),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t?"q=".concat(t):"",c=e.length?"type=".concat(e.join(",")):"",s=n?"limit=".concat(n):"",i=r?"offset=".concat(r):"";return z.a.get("https://api.spotify.com/v1/search?".concat(a,"&").concat(c,"&").concat(s,"&").concat(i),{headers:{Authorization:"Bearer "+atob(localStorage.getItem("accessToken"))}})}(t,["artist"],20).then((function(e){E(e.data.artists.items),w(t),s(!1),R(e.data.artists.next)})).catch((function(t){s(!1),j(t)}))},lastSearch:S})}),Object(X.jsxs)(Ot,{error:l,children:[Object(X.jsx)("p",{className:vt.a.searchText,children:B?B.length?"Showing results for '".concat(S,"'"):"No Results Found for '".concat(S,"'"):"Type anything in the search box to get started!"}),P]}),Object(X.jsx)("footer",{className:vt.a.footer,ref:e,children:H})]})},At=n(12),Tt=n.n(At),Ct=function(t){return Object(X.jsxs)("div",{className:Tt.a.AlbumCard,children:[Object(X.jsxs)("div",{className:Tt.a.albumGrid,children:[Object(X.jsx)("div",{className:Tt.a.imgContainer,children:Object(X.jsx)("img",{src:t.image,alt:t.name})}),Object(X.jsx)("a",{className:Tt.a.preview,href:t.preview,children:Object(X.jsx)("span",{children:"Preview on Spotify"})})]}),Object(X.jsxs)("div",{className:Tt.a.main,children:[Object(X.jsx)("h5",{className:Tt.a.name,children:t.name}),Object(X.jsx)("p",{className:Tt.a.artists,children:t.artists.join(" ")}),Object(X.jsx)("p",{className:Tt.a.date,children:t.date}),Object(X.jsxs)("p",{className:Tt.a.tracks,children:[t.tracks," tracks"]})]})]})},Nt=n.p+"static/media/defaultAlbum.7d7102cb.png",yt=n(40),Et=n.n(yt),kt=function(t){var e=Object(r.useRef)(),n=Object(r.useState)(!1),a=Object($.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(null),o=Object($.a)(i,2),l=o[0],j=o[1],b=Object(r.useState)(!1),d=Object($.a)(b,2),f=d[0],m=d[1],h=Object(u.c)((function(t){return t.currentArtist})),O=Object(u.c)((function(t){return t.albums})),x=Object(u.c)((function(t){return t.nextAlbumsUrl})),p=Object(u.b)(),v=Object(r.useCallback)((function(t){return p(xt(t))}),[p]),S=Object(r.useCallback)((function(t){return p(function(t){return{type:g,albums:t}}(t))}),[p]),A=Object(r.useCallback)((function(t){return p(function(t){return{type:_,nextAlbumsUrl:t}}(t))}),[p]);Object(r.useEffect)((function(){if(!l){var n;h||(s(!0),(n=t.match.params.id,z.a.get("https://api.spotify.com/v1/artists/".concat(n),{headers:{Authorization:"Bearer "+atob(localStorage.getItem("accessToken"))}})).then((function(t){v({id:t.data.id,name:t.data.name}),s(!1)})).catch((function(t){s(!1),j(t)}))),O||(s(!0),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=e.length?"include_groups=".concat(e.join(",")):"",c=n?"limit=".concat(n):"",s=r?"offset=".concat(r):"";return z.a.get("https://api.spotify.com/v1/artists/".concat(t,"/albums?").concat(a,"&").concat(c,"&").concat(s),{headers:{Authorization:"Bearer "+atob(localStorage.getItem("accessToken"))}})}(t.match.params.id,[],20).then((function(t){t.data.items.forEach((function(t){return t.artists=t.artists.map((function(t){return t.name}))})),S(t.data.items),A(t.data.next),s(!1)})).catch((function(t){s(!1),j(t)})));var r=function(){e.current&&(e.current.getBoundingClientRect().top<=window.innerHeight+100&&(f||(m(!0),x&&V(x).then((function(t){t.data.items.forEach((function(t){return t.artists=t.artists.map((function(t){return t.name}))})),S([].concat(Object(Z.a)(O),Object(Z.a)(t.data.items))),A(t.data.next),m(!1)})).catch((function(t){s(!1),m(!1),j(t)})))))};return window.addEventListener("scroll",r),function(){window.removeEventListener("scroll",r)}}}),[t,f,h,O,x,l,A,v,S]);var T,C=null===O||void 0===O?void 0:O.map((function(t){var e;return Object(X.jsx)(Ct,{image:(null===(e=t.images[1])||void 0===e?void 0:e.url)||Nt,name:t.name,artists:t.artists,tracks:t.total_tracks,date:t.release_date,preview:t.external_urls.spotify},Object(tt.a)())}));C&&(T=C.length?Object(X.jsx)(ot,{children:C}):Object(X.jsx)("h1",{children:"No Albums yet"}));var N=c?Object(X.jsx)(ft,{className:"fixed"}):T,y=f?x?Object(X.jsx)(ft,{}):Object(X.jsx)("h3",{children:"You've Reached the End"}):null;return Object(X.jsxs)("section",{className:Et.a.AlbumsPage,children:[Object(X.jsxs)(Ot,{error:l,children:[Object(X.jsxs)("div",{className:Et.a.intro,children:[Object(X.jsx)("h1",{children:null===h||void 0===h?void 0:h.name}),Object(X.jsx)("span",{children:"Albums"})]}),N]}),Object(X.jsx)("footer",{className:Et.a.footer,ref:e,children:y})]})},wt=n(59),Lt=n.n(wt),It=function(t){var e=Object(u.b)();return Object(X.jsx)("button",{className:[Lt.a.Logout,Lt.a[t.className]].join(" "),onClick:function(){return e(gt())},children:"Logout"})},Rt=n(60),Ut=n.n(Rt),Bt=function(t){return Object(X.jsxs)("nav",{className:Ut.a.Header,children:[Object(X.jsxs)(i.b,{to:"/",className:Ut.a.Logo,children:[Object(X.jsx)("img",{src:G,alt:""}),Object(X.jsx)("h1",{children:"Spotit"})]}),t.accessToken?Object(X.jsx)(It,{className:"header"}):null]})},Mt=Object(H.h)((function(){var t=Object(u.c)((function(t){return t.accessToken})),e=Object(u.b)(),n=Object(r.useCallback)((function(t,n){return e(function(t,e){return{type:l,accessToken:t,expiresAt:e}}(t,n))}),[e]),a=Object(r.useCallback)((function(){return e(gt())}),[e]),c=Object(r.useCallback)((function(t){return e(function(t){return{type:b,timeOutId:t}}(t))}),[e]),s=Object(H.g)().pathname;return Object(r.useEffect)((function(){if(t){var e=localStorage.getItem("expiresAt"),r=(new Date).getTime(),i=setTimeout((function(){a()}),e-r);c(i)}else{var o=new URLSearchParams(s.replace("/","?")),u=o.get("access_token");if(u){var l=(new Date).getTime(),j=1e3*parseInt(o.get("expires_in")),b=l+j,d=setTimeout((function(){a()}),j);c(d),n(u,b)}}}),[t,s,n,a,c]),Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(Bt,{accessToken:t}),Object(X.jsxs)(H.d,{children:[Object(X.jsx)(H.b,{exact:!0,path:"/",component:t?St:J}),Object(X.jsx)(H.b,{exact:!0,path:"/artists/:id/albums",component:kt}),Object(X.jsx)(H.b,{path:"/",render:function(){return Object(X.jsx)(H.a,{to:"/"})}})]}),t?null:Object(X.jsx)(H.a,{to:"/"})]})})),Pt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,247)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),c(t),s(t)}))},Ht=Object(o.a)(P);s.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(u.a,{store:Ht,children:Object(X.jsx)(i.a,{basename:"/",children:Object(X.jsx)(Mt,{})})})}),document.getElementById("root")),Pt()},27:function(t,e,n){t.exports={footer:"ArtistsPage_footer__1yNVf",searchBox:"ArtistsPage_searchBox__32FPd",searchText:"ArtistsPage_searchText__1WZaa"}},40:function(t,e,n){t.exports={footer:"AlbumsPage_footer__251fr",intro:"AlbumsPage_intro__36c6W"}},57:function(t,e,n){t.exports={LoginPage:"LoginPage_LoginPage__2jbru",welcome:"LoginPage_welcome__1pizM"}},58:function(t,e,n){t.exports={Spinner:"Spinner_Spinner__1Hsyz",loading:"Spinner_loading__kqbuU",fixed:"Spinner_fixed__2U3x0"}},59:function(t,e,n){t.exports={Logout:"Logout_Logout__M7RYp",header:"Logout_header__1zRfy"}},60:function(t,e,n){t.exports={Header:"Header_Header__MTfQT",Logo:"Header_Logo__1S6Qb"}},96:function(t,e,n){t.exports={SpotifyLogin:"SpotifyLogin_SpotifyLogin__NuURX"}},97:function(t,e,n){t.exports={SearchBar:"SearchBar_SearchBar__8Soa7"}},99:function(t,e,n){t.exports={ErrorHandler:"ErrorHandler_ErrorHandler__2Qku1"}}},[[245,1,2]]]);
//# sourceMappingURL=main.1c585dd8.chunk.js.map